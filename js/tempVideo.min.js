$(function(){function r(){var n=this;n.videos=ko.observableArray();n.removeVideo=function(t){var i=t["@VID"];$.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",url:"/L000_Service/ElearningService.asmx/DeleteVideoPreview",data:JSON.stringify({Video_Id:i}),success:function(){n.videos.remove(t)}})};n.forwardVideo=function(n){var t=n["@VID"];$.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",url:"/L000_Service/ElearningService.asmx/ForwardVideoPreview",data:JSON.stringify({Video_Name:n.Name,Video_Path:n.Path}),success:function(n){var t=JSON.parse(n.d);t.Success_Mark?OpenDialogForDisplay("/A00D_Information/A00D_M31_SendMessage.aspx","TitleName="+encodeURIComponent("A00D_M31　轉寄訊息"),2,660):alert("新增失敗")}})};n.canModify=!1}var t='<div class="player"><div class="overlay"><\/div><div class="main"><\/div><\/div>',i='<div id="videoForm"><fieldset><legend style="font-size: 16px;">新增影片<\/legend><div class="form-group"><label class="control-label" for="txtVideoName">影片名稱<\/label><input class="form-control" id="txtVideoName" type="text"/><label class="control-label" for="txtVideoPath">影片檔名<\/label><input class="form-control" id="txtVideoPath" type="text"/><span class="help-block" style="height: 19px;"><\/span><\/div><div class="form-group text-right"><input type="button" class="btn btn-default" value="取消"/><input type="button" data-role="send" class="btn btn-primary" value="送出"/><\/div><\/fieldset><\/div>',n;$(document).on("click","li a.play",function(n){n.preventDefault();$(".player").length===0&&$('<div class="player"><div class="overlay"><\/div><div class="main"><iframe id="mediaPlayer" frameborder="0"><\/iframe><\/div><\/div>').appendTo("body");var t=$(this).attr("href");$("#mediaPlayer").attr("src","/L10B_Briefing/L10B999_F1_Play.aspx?VideoId="+t);$(".player").show()});$(document).on("click",".overlay",function(){$(this).parent().remove()});n=new r;$.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",url:"/L000_Service/ElearningService.asmx/GetVideoPreview",data:null,success:function(t){var i=JSON.parse(t.d),r;i.Response_Data.Videos.Videos&&(i.Response_Data.Videos.Videos.Video.length?n.videos(i.Response_Data.Videos.Videos.Video):(r=[],r.push(i.Response_Data.Videos.Videos.Video),n.videos(r)));n.canModify=i.Response_Data.CanModify;ko.applyBindings(n);$("#loading").remove();$("#video-list").show()}});$("#cmdInsert").click(function(){$(t).find(".main").append($(i)).end().appendTo("body").show()});$(document).on("click",'#videoForm input[type="button"]',function(){var r=$(this),t,i;if(r.data("role")){if(t=$("#txtVideoName").val(),i=$("#txtVideoPath").val(),t==="")return $("#videoForm").find(".help-block").text("請輸入影片名稱"),console.log($("#videoForm").find(".help-block").length),!1;if(i==="")return $("#videoForm").find(".help-block").text("請輸入影片檔案名稱"),!1;$.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",url:"/L000_Service/ElearningService.asmx/NewVideoPreview",data:JSON.stringify({Video_Name:t,Video_Path:i}),success:function(r){var u=JSON.parse(r.d),f;u.Success_Mark?(f=u.Response_Data.VID,n.videos.push({"@VID":f,Name:t,Path:i}),$(".player").remove()):alert("新增失敗")}})}else $(".player").remove()});$('[data-role="send"]').click(function(){})});
/*
//# sourceMappingURL=tempVideo.min.js.map
*/